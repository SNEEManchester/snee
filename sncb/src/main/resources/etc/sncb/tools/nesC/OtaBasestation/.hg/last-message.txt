moved serial reply to its own function